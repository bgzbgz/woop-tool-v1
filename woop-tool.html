<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WOOP | Fast Track Program</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        @font-face {
            font-family: 'Plaak';
            src: url('Plaak3Trial-43-Bold.otf') format('opentype');
            font-weight: bold;
        }
        
        @font-face {
            font-family: 'Riforma';
            src: url('RiformaLL-Regular.otf') format('opentype');
            font-weight: normal;
        }
        
        @font-face {
            font-family: 'Monument';
            src: url('MonumentGrotesk-Mono.otf') format('opentype');
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Riforma', -apple-system, sans-serif;
            font-size: 16px;
            color: #000000;
            background: #FFFFFF;
            -webkit-font-smoothing: antialiased;
        }
        
        .plaak {
            font-family: 'Plaak', sans-serif;
            font-weight: bold;
            letter-spacing: -0.01em;
            line-height: 1.2;
        }
        
        .monument {
            font-family: 'Monument', monospace;
            letter-spacing: 0.05em;
        }
        
        .smooth {
            transition: all 0.2s ease;
        }
        
        .worksheet-input {
            border: 2px solid #E0E0E0;
            padding: 12px 16px;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            transition: border-color 0.2s ease;
            width: 100%;
        }
        
        .worksheet-input:focus {
            outline: none;
            border-color: #000000;
        }
        
        .worksheet-textarea {
            border: 2px solid #E0E0E0;
            padding: 12px 16px;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            transition: border-color 0.2s ease;
            width: 100%;
            min-height: 120px;
            resize: vertical;
        }
        
        .worksheet-textarea:focus {
            outline: none;
            border-color: #000000;
        }
        
        .btn-primary {
            background: #000000;
            color: #FFFFFF;
            padding: 12px 24px;
            border: 2px solid #000000;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-primary:disabled {
            background: #E0E0E0;
            color: #9CA3AF;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .btn-secondary {
            background: #FFFFFF;
            color: #000000;
            padding: 12px 24px;
            border: 2px solid #000000;
            font-family: 'Riforma', sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            background: #F8F8F8;
        }
        
        .numbered-section {
            background: #000000;
            color: #FFFFFF;
            padding: 10px 16px;
            font-size: 18px;
            font-weight: bold;
            letter-spacing: 0.5px;
            display: inline-block;
        }
        
        .context-box {
            background: #F8F8F8;
            border-left: 4px solid #000000;
            padding: 24px;
        }
        
        .progress-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid #000000;
            transition: all 0.2s ease;
        }
        
        .progress-dot.active {
            background: #000000;
        }
        
        .progress-dot.completed {
            background: #000000;
        }
        
        .zone-green {
            background: #E8F5E9;
            border: 2px solid #4CAF50;
        }
        
        .zone-yellow {
            background: #FFF9C4;
            border: 2px solid #FDD835;
        }
        
        .zone-red {
            background: #FFEBEE;
            border: 2px solid #EF5350;
        }
        
        .step-card {
            border: 3px solid #000000;
            padding: 24px;
            background: #FFFFFF;
        }
        
        .obstacle-item {
            border-left: 4px solid #EF5350;
            padding: 16px;
            background: #FFEBEE;
            margin-bottom: 12px;
        }
        
        .action-badge {
            background: #4CAF50;
            color: #FFFFFF;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
        }
        
        .canvas-output {
            border: 4px solid #000000;
            padding: 32px;
            background: #FFFFFF;
        }
        
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: #FFFFFF;
            }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .energy-pulse {
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Configuration
        const CONFIG = {
            AUTOSAVE_WEBHOOK: 'YOUR_N8N_AUTOSAVE_WEBHOOK_URL',
            SHARE_WEBHOOK: 'YOUR_N8N_SHARE_WEBHOOK_URL',
            SUBMIT_WEBHOOK: 'YOUR_N8N_SUBMIT_WEBHOOK_URL',
            AUTOSAVE_DELAY: 2000
        };

        function WOOPTool() {
            const [currentStep, setCurrentStep] = useState(1);
            const [showCanvas, setShowCanvas] = useState(false);
            
            // Step 1: WISH (End Game)
            const [wish, setWish] = useState({
                outcome: '',
                worldChange: '',
                feeling: ''
            });
            
            // Step 2: OUTCOME (The Steps)
            const [outcomes, setOutcomes] = useState(['', '', '', '']);
            const [mentallyRehearsed, setMentallyRehearsed] = useState(false);
            
            // Step 3: OBSTACLE (Difficulties)
            const [obstacles, setObstacles] = useState([
                { problem: '', solution: '' }
            ]);
            
            // Step 4: PLAN (First Action)
            const [plan, setPlan] = useState({
                bigSteps: ['', '', ''],
                firstAction: '',
                deadline: ''
            });
            
            const autosaveTimer = useRef(null);
            
            // Auto-save functionality
            useEffect(() => {
                if (autosaveTimer.current) {
                    clearTimeout(autosaveTimer.current);
                }
                
                autosaveTimer.current = setTimeout(() => {
                    saveToLocalStorage();
                    // Optionally send to webhook
                    // sendToWebhook(CONFIG.AUTOSAVE_WEBHOOK, getAllData());
                }, CONFIG.AUTOSAVE_DELAY);
                
                return () => {
                    if (autosaveTimer.current) {
                        clearTimeout(autosaveTimer.current);
                    }
                };
            }, [wish, outcomes, obstacles, plan]);
            
            // Load from localStorage on mount
            useEffect(() => {
                loadFromLocalStorage();
            }, []);
            
            const getAllData = () => {
                return {
                    wish,
                    outcomes,
                    mentallyRehearsed,
                    obstacles,
                    plan,
                    timestamp: new Date().toISOString()
                };
            };
            
            const saveToLocalStorage = () => {
                localStorage.setItem('woopData', JSON.stringify(getAllData()));
            };
            
            const loadFromLocalStorage = () => {
                const saved = localStorage.getItem('woopData');
                if (saved) {
                    const data = JSON.parse(saved);
                    setWish(data.wish || { outcome: '', worldChange: '', feeling: '' });
                    setOutcomes(data.outcomes || ['', '', '', '']);
                    setMentallyRehearsed(data.mentallyRehearsed || false);
                    setObstacles(data.obstacles || [{ problem: '', solution: '' }]);
                    setPlan(data.plan || { bigSteps: ['', '', ''], firstAction: '', deadline: '' });
                }
            };
            
            const sendToWebhook = async (url, data) => {
                try {
                    await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(data)
                    });
                } catch (error) {
                    console.error('Webhook error:', error);
                }
            };
            
            // Validation functions
            const isStep1Valid = () => {
                return wish.outcome.trim().length > 20 && 
                       wish.worldChange.trim().length > 10 && 
                       wish.feeling.trim().length > 5;
            };
            
            const isStep2Valid = () => {
                const filledOutcomes = outcomes.filter(o => o.trim().length > 10);
                return filledOutcomes.length >= 3 && mentallyRehearsed;
            };
            
            const isStep3Valid = () => {
                return obstacles.length >= 2 && 
                       obstacles.every(o => o.problem.trim().length > 10 && o.solution.trim().length > 10);
            };
            
            const isStep4Valid = () => {
                const filledBigSteps = plan.bigSteps.filter(s => s.trim().length > 5);
                return filledBigSteps.length >= 2 && 
                       plan.firstAction.trim().length > 10 && 
                       plan.deadline.trim().length > 0;
            };
            
            const addObstacle = () => {
                if (obstacles.length < 5) {
                    setObstacles([...obstacles, { problem: '', solution: '' }]);
                }
            };
            
            const updateObstacle = (index, field, value) => {
                const newObstacles = [...obstacles];
                newObstacles[index][field] = value;
                setObstacles(newObstacles);
            };
            
            const removeObstacle = (index) => {
                if (obstacles.length > 1) {
                    setObstacles(obstacles.filter((_, i) => i !== index));
                }
            };
            
            const handleNext = () => {
                if (currentStep < 4) {
                    setCurrentStep(currentStep + 1);
                    window.scrollTo(0, 0);
                }
            };
            
            const handleBack = () => {
                if (currentStep > 1) {
                    setCurrentStep(currentStep - 1);
                    window.scrollTo(0, 0);
                }
            };
            
            const handleViewCanvas = () => {
                setShowCanvas(true);
                window.scrollTo(0, 0);
            };
            
            const handleFinalSubmit = async () => {
                await sendToWebhook(CONFIG.SUBMIT_WEBHOOK, {
                    ...getAllData(),
                    status: 'submitted',
                    completedAt: new Date().toISOString()
                });
                alert('üéâ WOOP Plan Submitted! Your clarity and energy are locked in.');
            };
            
            const handleShare = async () => {
                await sendToWebhook(CONFIG.SHARE_WEBHOOK, {
                    ...getAllData(),
                    action: 'share_with_team'
                });
                alert('‚úÖ Shared with your team! Accountability activated.');
            };
            
            const exportPDF = () => {
                window.print();
            };
            
            if (showCanvas) {
                return <CanvasView 
                    data={getAllData()} 
                    onBack={() => setShowCanvas(false)}
                    onSubmit={handleFinalSubmit}
                    onShare={handleShare}
                    onExport={exportPDF}
                />;
            }
            
            return (
                <div className="min-h-screen bg-white">
                    {/* Header */}
                    <header className="border-b-4 border-black p-6">
                        <div className="max-w-6xl mx-auto">
                            <h1 className="plaak text-4xl mb-2">WOOP</h1>
                            <p className="text-gray-600">Wish, Outcome, Obstacle, Plan</p>
                        </div>
                    </header>
                    
                    {/* Progress Bar */}
                    <div className="no-print border-b-2 border-gray-200 bg-gray-50 p-4">
                        <div className="max-w-6xl mx-auto">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2">
                                        <div className={`progress-dot ${currentStep >= 1 ? 'completed' : ''} ${currentStep === 1 ? 'active' : ''}`}></div>
                                        <span className="monument text-xs">WISH</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className={`progress-dot ${currentStep >= 2 ? 'completed' : ''} ${currentStep === 2 ? 'active' : ''}`}></div>
                                        <span className="monument text-xs">OUTCOME</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className={`progress-dot ${currentStep >= 3 ? 'completed' : ''} ${currentStep === 3 ? 'active' : ''}`}></div>
                                        <span className="monument text-xs">OBSTACLE</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className={`progress-dot ${currentStep >= 4 ? 'completed' : ''} ${currentStep === 4 ? 'active' : ''}`}></div>
                                        <span className="monument text-xs">PLAN</span>
                                    </div>
                                </div>
                                <div className="monument text-xs text-gray-600">
                                    STEP {currentStep}/4
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Main Content */}
                    <div className="max-w-6xl mx-auto p-6">
                        <div className="flex gap-6">
                            {/* Left Sidebar - Context */}
                            <div className="w-80 flex-shrink-0">
                                <div className="context-box sticky top-6">
                                    {currentStep === 1 && <Step1Context />}
                                    {currentStep === 2 && <Step2Context />}
                                    {currentStep === 3 && <Step3Context />}
                                    {currentStep === 4 && <Step4Context />}
                                </div>
                            </div>
                            
                            {/* Right Content - Input Area */}
                            <div className="flex-1">
                                <div className="animate-slide-in">
                                    {currentStep === 1 && (
                                        <Step1Input 
                                            wish={wish} 
                                            setWish={setWish}
                                            isValid={isStep1Valid()}
                                            onNext={handleNext}
                                        />
                                    )}
                                    {currentStep === 2 && (
                                        <Step2Input 
                                            outcomes={outcomes}
                                            setOutcomes={setOutcomes}
                                            mentallyRehearsed={mentallyRehearsed}
                                            setMentallyRehearsed={setMentallyRehearsed}
                                            isValid={isStep2Valid()}
                                            onNext={handleNext}
                                            onBack={handleBack}
                                        />
                                    )}
                                    {currentStep === 3 && (
                                        <Step3Input 
                                            obstacles={obstacles}
                                            updateObstacle={updateObstacle}
                                            addObstacle={addObstacle}
                                            removeObstacle={removeObstacle}
                                            isValid={isStep3Valid()}
                                            onNext={handleNext}
                                            onBack={handleBack}
                                        />
                                    )}
                                    {currentStep === 4 && (
                                        <Step4Input 
                                            plan={plan}
                                            setPlan={setPlan}
                                            isValid={isStep4Valid()}
                                            onViewCanvas={handleViewCanvas}
                                            onBack={handleBack}
                                        />
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Step 1 Context Component
        function Step1Context() {
            return (
                <>
                    <h2 className="plaak text-3xl mb-4">WHY</h2>
                    <p className="mb-4">
                        Dreams create energy. Clarity of your dream creates comfort.
                    </p>
                    <p className="mb-4">
                        Your brain doesn't differentiate between what's in your head and reality. When you clearly visualize your end game, you feel comfort moving toward it.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">WHAT</h2>
                    <p className="mb-4">
                        Define your end game for the Fast Track program with brutal clarity.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">HOW</h2>
                    <ol className="list-decimal list-inside space-y-2">
                        <li>Picture the concrete outcome</li>
                        <li>Describe how the world changed</li>
                        <li>Feel the emotion of success</li>
                    </ol>
                </>
            );
        }

        // Step 2 Context Component
        function Step2Context() {
            return (
                <>
                    <h2 className="plaak text-3xl mb-4">WHY</h2>
                    <p className="mb-4">
                        Mental rehearsal works. Lewis Hamilton mentally drives each lap before stepping in the car.
                    </p>
                    <p className="mb-4">
                        When you mentally rehearse the steps, you gain brutal clarity on what needs to happen‚Äîhow and when.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">WHAT</h2>
                    <p className="mb-4">
                        Map the journey from where you are to your end game.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">HOW</h2>
                    <ol className="list-decimal list-inside space-y-2">
                        <li>List 3-5 key milestones</li>
                        <li>Close your eyes</li>
                        <li>See yourself doing each step</li>
                        <li>Confirm when ready</li>
                    </ol>
                </>
            );
        }

        // Step 3 Context Component
        function Step3Context() {
            return (
                <>
                    <h2 className="plaak text-3xl mb-4">WHY</h2>
                    <p className="mb-4">
                        You need to be mentally prepared. When the problem comes, you'll get happy and excited because you've already seen it.
                    </p>
                    <p className="mb-4">
                        You'll simply say: "Nothing new to me."
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">WHAT</h2>
                    <p className="mb-4">
                        Identify what will try to stop you, and decide now how you'll respond.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">HOW</h2>
                    <ol className="list-decimal list-inside space-y-2">
                        <li>List the problems you'll face</li>
                        <li>For each: What will you do?</li>
                        <li>Visualize handling each one</li>
                    </ol>
                </>
            );
        }

        // Step 4 Context Component
        function Step4Context() {
            return (
                <>
                    <h2 className="plaak text-3xl mb-4">WHY</h2>
                    <p className="mb-4">
                        Big steps are intimidating. Fast Track hates big steps.
                    </p>
                    <p className="mb-4">
                        Cut the elephant into pieces. Choose the smallest, easiest part to eat first.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">WHAT</h2>
                    <p className="mb-4">
                        Break down your journey and commit to the easiest first action.
                    </p>
                    <h2 className="plaak text-3xl mb-4 mt-8">HOW</h2>
                    <ol className="list-decimal list-inside space-y-2">
                        <li>List the big chunks of work</li>
                        <li>Pick the easiest piece</li>
                        <li>Set a specific deadline</li>
                        <li>Commit publicly</li>
                    </ol>
                </>
            );
        }

        // Step 1 Input Component
        function Step1Input({ wish, setWish, isValid, onNext }) {
            return (
                <div className="step-card">
                    <div className="numbered-section mb-6">[01] YOUR END GAME</div>
                    
                    <div className="mb-6">
                        <label className="block font-bold mb-2">
                            What have you achieved? What's the concrete outcome?
                        </label>
                        <textarea 
                            className="worksheet-textarea"
                            value={wish.outcome}
                            onChange={(e) => setWish({...wish, outcome: e.target.value})}
                            placeholder="It's 90 days from now. The Fast Track program is done. Describe in vivid detail what you've achieved. Be specific: numbers, metrics, tangible results."
                        />
                        <div className="text-sm text-gray-600 mt-1">
                            {wish.outcome.length}/300 characters (min 20)
                        </div>
                    </div>
                    
                    <div className="mb-6">
                        <label className="block font-bold mb-2">
                            How has the world changed?
                        </label>
                        <textarea 
                            className="worksheet-textarea"
                            value={wish.worldChange}
                            onChange={(e) => setWish({...wish, worldChange: e.target.value})}
                            placeholder="My team operates differently. Our clients notice the change. Our revenue reflects the transformation."
                        />
                        <div className="text-sm text-gray-600 mt-1">
                            {wish.worldChange.length}/200 characters (min 10)
                        </div>
                    </div>
                    
                    <div className="mb-6">
                        <label className="block font-bold mb-2">
                            How do you feel about it?
                        </label>
                        <input 
                            type="text"
                            className="worksheet-input"
                            value={wish.feeling}
                            onChange={(e) => setWish({...wish, feeling: e.target.value})}
                            placeholder="Energized. Proud. Unstoppable. Clear. In control."
                        />
                        <div className="text-sm text-gray-600 mt-1">
                            One word or short phrase that captures your emotion
                        </div>
                    </div>
                    
                    {!isValid && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                            <p className="text-sm">
                                <strong>Clarity Check:</strong> Be specific. Your end game needs vivid detail to create energy.
                            </p>
                        </div>
                    )}
                    
                    {isValid && (
                        <div className="bg-green-50 border-l-4 border-green-500 p-4 mb-6 energy-pulse">
                            <p className="text-sm font-bold">
                                ‚úì End game locked in. Energy created.
                            </p>
                        </div>
                    )}
                    
                    <div className="flex justify-end">
                        <button 
                            className="btn-primary"
                            onClick={onNext}
                            disabled={!isValid}
                        >
                            Next: Map The Steps ‚Üí
                        </button>
                    </div>
                </div>
            );
        }

        // Step 2 Input Component
        function Step2Input({ outcomes, setOutcomes, mentallyRehearsed, setMentallyRehearsed, isValid, onNext, onBack }) {
            const updateOutcome = (index, value) => {
                const newOutcomes = [...outcomes];
                newOutcomes[index] = value;
                setOutcomes(newOutcomes);
            };
            
            return (
                <div className="step-card">
                    <div className="numbered-section mb-6">[02] THE STEPS</div>
                    
                    <p className="mb-6">
                        What are the 3-5 key milestones you need to hit to reach your end game?
                    </p>
                    
                    {outcomes.map((outcome, index) => (
                        <div key={index} className="mb-4">
                            <label className="block font-bold mb-2">
                                Step {index + 1} {index < 3 && <span className="text-red-500">*</span>}
                            </label>
                            <input 
                                type="text"
                                className="worksheet-input"
                                value={outcome}
                                onChange={(e) => updateOutcome(index, e.target.value)}
                                placeholder={[
                                    "Align team on core values and 3 critical moves",
                                    "Implement ABC system for delegation clarity",
                                    "Launch weekly review cadence with metrics",
                                    "Optimize personal energy routines"
                                ][index]}
                            />
                        </div>
                    ))}
                    
                    <div className="bg-gray-50 border-2 border-black p-6 my-6">
                        <h3 className="plaak text-xl mb-4">MENTAL REHEARSAL</h3>
                        <p className="mb-4">
                            Close your eyes. Picture yourself completing each step above. See the details. Feel the momentum.
                        </p>
                        <label className="flex items-center gap-3 cursor-pointer">
                            <input 
                                type="checkbox"
                                checked={mentallyRehearsed}
                                onChange={(e) => setMentallyRehearsed(e.target.checked)}
                                className="w-6 h-6"
                            />
                            <span className="font-bold">
                                I've mentally rehearsed each step. I can see exactly what needs to happen.
                            </span>
                        </label>
                    </div>
                    
                    {!isValid && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                            <p className="text-sm">
                                <strong>Clarity Check:</strong> Fill in at least 3 steps and complete your mental rehearsal.
                            </p>
                        </div>
                    )}
                    
                    {isValid && (
                        <div className="bg-green-50 border-l-4 border-green-500 p-4 mb-6 energy-pulse">
                            <p className="text-sm font-bold">
                                ‚úì Path is clear. You know exactly what to do.
                            </p>
                        </div>
                    )}
                    
                    <div className="flex justify-between">
                        <button className="btn-secondary" onClick={onBack}>
                            ‚Üê Back
                        </button>
                        <button 
                            className="btn-primary"
                            onClick={onNext}
                            disabled={!isValid}
                        >
                            Next: Anticipate Obstacles ‚Üí
                        </button>
                    </div>
                </div>
            );
        }

        // Step 3 Input Component
        function Step3Input({ obstacles, updateObstacle, addObstacle, removeObstacle, isValid, onNext, onBack }) {
            return (
                <div className="step-card">
                    <div className="numbered-section mb-6">[03] THE OBSTACLES</div>
                    
                    <p className="mb-6">
                        What difficulties will you face on your way to the end game? When these problems occur, what will you do?
                    </p>
                    
                    {obstacles.map((obstacle, index) => (
                        <div key={index} className="obstacle-item mb-4">
                            <div className="flex justify-between items-center mb-3">
                                <span className="font-bold">Obstacle {index + 1}</span>
                                {obstacles.length > 1 && (
                                    <button 
                                        onClick={() => removeObstacle(index)}
                                        className="text-red-600 text-sm hover:underline"
                                    >
                                        Remove
                                    </button>
                                )}
                            </div>
                            
                            <div className="mb-3">
                                <label className="block font-bold mb-2">
                                    What's the problem?
                                </label>
                                <input 
                                    type="text"
                                    className="worksheet-input"
                                    value={obstacle.problem}
                                    onChange={(e) => updateObstacle(index, 'problem', e.target.value)}
                                    placeholder="Team resistance to new system. Urgent client fires eating my time. My own procrastination on hard conversations."
                                />
                            </div>
                            
                            <div>
                                <label className="block font-bold mb-2">
                                    When this happens, what will you do?
                                </label>
                                <input 
                                    type="text"
                                    className="worksheet-input"
                                    value={obstacle.solution}
                                    onChange={(e) => updateObstacle(index, 'solution', e.target.value)}
                                    placeholder="I'll schedule 1-on-1s immediately. I'll time-block 'fire hours' and protect deep work. I'll use the 5-second rule and just start."
                                />
                            </div>
                        </div>
                    ))}
                    
                    {obstacles.length < 5 && (
                        <button 
                            onClick={addObstacle}
                            className="btn-secondary w-full mb-6"
                        >
                            + Add Another Obstacle
                        </button>
                    )}
                    
                    <div className="bg-black text-white p-4 mb-6">
                        <p className="text-sm">
                            <strong>Remember:</strong> When these obstacles show up, you'll recognize them instantly. You'll smile and say: "Nothing new to me. I'm prepared."
                        </p>
                    </div>
                    
                    {!isValid && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                            <p className="text-sm">
                                <strong>Preparation Check:</strong> Identify at least 2 obstacles with specific action plans.
                            </p>
                        </div>
                    )}
                    
                    {isValid && (
                        <div className="bg-green-50 border-l-4 border-green-500 p-4 mb-6 energy-pulse">
                            <p className="text-sm font-bold">
                                ‚úì You're mentally prepared. Obstacles won't surprise you.
                            </p>
                        </div>
                    )}
                    
                    <div className="flex justify-between">
                        <button className="btn-secondary" onClick={onBack}>
                            ‚Üê Back
                        </button>
                        <button 
                            className="btn-primary"
                            onClick={onNext}
                            disabled={!isValid}
                        >
                            Next: Cut The Elephant ‚Üí
                        </button>
                    </div>
                </div>
            );
        }

        // Step 4 Input Component
        function Step4Input({ plan, setPlan, isValid, onViewCanvas, onBack }) {
            const updateBigStep = (index, value) => {
                const newBigSteps = [...plan.bigSteps];
                newBigSteps[index] = value;
                setPlan({...plan, bigSteps: newBigSteps});
            };
            
            return (
                <div className="step-card">
                    <div className="numbered-section mb-6">[04] CUT THE ELEPHANT</div>
                    
                    <p className="mb-6 font-bold">
                        Big steps are intimidating. Break them down. Choose the smallest, easiest piece to start.
                    </p>
                    
                    <div className="mb-6">
                        <label className="block font-bold mb-2">
                            What are the big chunks of work?
                        </label>
                        {plan.bigSteps.map((step, index) => (
                            <div key={index} className="mb-2">
                                <input 
                                    type="text"
                                    className="worksheet-input"
                                    value={step}
                                    onChange={(e) => updateBigStep(index, e.target.value)}
                                    placeholder={[
                                        "Define and document company values",
                                        "Build ABC delegation framework",
                                        "Set up weekly metrics dashboard"
                                    ][index]}
                                />
                            </div>
                        ))}
                    </div>
                    
                    <div className="bg-green-50 border-2 border-green-500 p-6 mb-6">
                        <h3 className="plaak text-xl mb-4">THE FIRST BITE</h3>
                        
                        <div className="mb-4">
                            <label className="block font-bold mb-2">
                                Which is the smallest, easiest piece you can do first? <span className="text-red-500">*</span>
                            </label>
                            <textarea 
                                className="worksheet-textarea"
                                value={plan.firstAction}
                                onChange={(e) => setPlan({...plan, firstAction: e.target.value})}
                                placeholder="Schedule 90-minute workshop with leadership team to brainstorm our 5 core values. Book the room. Send the invite. That's it."
                            />
                        </div>
                        
                        <div>
                            <label className="block font-bold mb-2">
                                By when? <span className="text-red-500">*</span>
                            </label>
                            <input 
                                type="date"
                                className="worksheet-input"
                                value={plan.deadline}
                                onChange={(e) => setPlan({...plan, deadline: e.target.value})}
                                min={new Date().toISOString().split('T')[0]}
                            />
                        </div>
                    </div>
                    
                    {!isValid && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                            <p className="text-sm">
                                <strong>Action Check:</strong> Define your first bite and set a specific deadline.
                            </p>
                        </div>
                    )}
                    
                    {isValid && (
                        <div className="bg-green-50 border-l-4 border-green-500 p-4 mb-6 energy-pulse">
                            <p className="text-sm font-bold">
                                ‚úì First action locked. You know exactly where to start.
                            </p>
                        </div>
                    )}
                    
                    <div className="flex justify-between">
                        <button className="btn-secondary" onClick={onBack}>
                            ‚Üê Back
                        </button>
                        <button 
                            className="btn-primary"
                            onClick={onViewCanvas}
                            disabled={!isValid}
                        >
                            View Your WOOP Canvas ‚Üí
                        </button>
                    </div>
                </div>
            );
        }

        // Canvas View Component
        function CanvasView({ data, onBack, onSubmit, onShare, onExport }) {
            return (
                <div className="min-h-screen bg-white">
                    {/* Header */}
                    <header className="border-b-4 border-black p-6 no-print">
                        <div className="max-w-6xl mx-auto flex justify-between items-center">
                            <div>
                                <h1 className="plaak text-4xl mb-2">YOUR WOOP CANVAS</h1>
                                <p className="text-gray-600">Clarity + Energy = Action</p>
                            </div>
                            <button onClick={onBack} className="btn-secondary">
                                ‚Üê Edit
                            </button>
                        </div>
                    </header>
                    
                    {/* Canvas */}
                    <div className="max-w-6xl mx-auto p-6">
                        <div className="canvas-output mb-6">
                            {/* Wish Section */}
                            <div className="mb-8">
                                <div className="numbered-section mb-4">[W] YOUR END GAME</div>
                                <div className="bg-green-50 border-l-4 border-green-500 p-6">
                                    <h3 className="plaak text-xl mb-2">ACHIEVED</h3>
                                    <p className="mb-4">{data.wish.outcome}</p>
                                    
                                    <h3 className="plaak text-xl mb-2">WORLD CHANGED</h3>
                                    <p className="mb-4">{data.wish.worldChange}</p>
                                    
                                    <h3 className="plaak text-xl mb-2">FEELING</h3>
                                    <p className="text-2xl font-bold">{data.wish.feeling}</p>
                                </div>
                            </div>
                            
                            {/* Outcomes Section */}
                            <div className="mb-8">
                                <div className="numbered-section mb-4">[O] THE STEPS</div>
                                <div className="grid grid-cols-2 gap-4">
                                    {data.outcomes.filter(o => o.trim()).map((outcome, index) => (
                                        <div key={index} className="border-2 border-black p-4">
                                            <div className="monument text-xs mb-2">STEP {index + 1}</div>
                                            <p>{outcome}</p>
                                        </div>
                                    ))}
                                </div>
                                {data.mentallyRehearsed && (
                                    <div className="bg-black text-white p-2 mt-4 text-center">
                                        ‚úì MENTALLY REHEARSED
                                    </div>
                                )}
                            </div>
                            
                            {/* Obstacles Section */}
                            <div className="mb-8">
                                <div className="numbered-section mb-4">[O] THE OBSTACLES</div>
                                {data.obstacles.map((obstacle, index) => (
                                    <div key={index} className="obstacle-item mb-3">
                                        <div className="font-bold mb-2">
                                            Problem: {obstacle.problem}
                                        </div>
                                        <div className="text-sm">
                                            <strong>Solution:</strong> {obstacle.solution}
                                        </div>
                                    </div>
                                ))}
                            </div>
                            
                            {/* Plan Section */}
                            <div>
                                <div className="numbered-section mb-4">[P] THE FIRST BITE</div>
                                <div className="bg-green-50 border-4 border-green-500 p-6">
                                    <div className="action-badge mb-4">FIRST ACTION</div>
                                    <p className="text-xl mb-4">{data.plan.firstAction}</p>
                                    <div className="flex items-center gap-4">
                                        <span className="monument text-sm">DEADLINE:</span>
                                        <span className="text-2xl font-bold">
                                            {new Date(data.plan.deadline).toLocaleDateString('en-US', { 
                                                month: 'short', 
                                                day: 'numeric', 
                                                year: 'numeric' 
                                            })}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* Action Buttons */}
                        <div className="flex gap-4 no-print">
                            <button onClick={onShare} className="btn-primary flex-1">
                                Share With Team
                            </button>
                            <button onClick={onExport} className="btn-secondary flex-1">
                                Export PDF
                            </button>
                            <button onClick={onSubmit} className="btn-primary flex-1">
                                Final Submit
                            </button>
                        </div>
                        
                        <div className="mt-6 text-center text-sm text-gray-600">
                            <p className="monument">CLARITY AND ENERGY LOCKED IN</p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render App
        ReactDOM.render(<WOOPTool />, document.getElementById('root'));
    </script>
</body>
</html>
